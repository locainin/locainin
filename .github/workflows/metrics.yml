---
name: Metrics

"on":
  push:
    branches:
      - main
    paths:
      - ".github/workflows/metrics.yml"
      - "README.md"
  schedule:
    - cron: "0 6 * * *"
  workflow_dispatch:

permissions:
  contents: write

# Prevent overlapping runs so generated SVG commits are deterministic
concurrency:
  group: metrics
  cancel-in-progress: true

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Used languages
        uses: lowlighter/metrics@65836723097537a54cd8eb90f61839426b4266b6
        with:
          filename: metrics.plugin.languages.details.svg
          token: ${{ secrets.METRICS_TOKEN }}
          output_action: commit
          base: ""
          config_display: large
          repositories_affiliations: owner, collaborator, organization_member
          plugin_languages: "yes"
          plugin_languages_indepth: "no"
          plugin_languages_limit: 8
          plugin_languages_other: "yes"
          plugin_languages_details: bytes-size, percentage
